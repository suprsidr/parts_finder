!function(a,b,c,d){"use strict";function e(){b("[data-parts-finder]").each(function(){var a=["brand","type","model"],c=b("<div />",{"class":"row parts-bar"});b.each(a,function(d){c.append(b("<div />",{"class":"large-4 columns step-"+parseInt(d+1)}).append(b("<fieldset />").append(b("<legend />",{text:"Step "+parseInt(d+1)})).append(b("<select />",{name:a[d]+"-list"}))))});var d=b(this).data("category")?{$elemMatch:{ID:{$regex:encodeURIComponent("^"+b(this).data("category")+"_(?!BATTERIES)")}}}:{$elemMatch:{ID:{$regex:encodeURIComponent("[A-Z]_(?!BATTERIES)")}}};c.data("cat",b(this).data("category")||"ALL"),b(this).append(c),f(b(this),d)})}function f(a,c){var d=JSON.stringify({HasPartsListing:1,Displayable:1,Categories:c}),e=JSON.stringify({BrandName:1}),f=JSON.stringify({_id:0,BrandID:1,BrandName:1,Categories:1,Status:1});b.ajax({url:j+d+"/0/"+e+"/"+f+"?callback=?",type:"GET",dataType:"json",success:function(d){i(a),a.find('[name="type-list"], [name="model-list"]').empty(),a.find('[name="brand-list"]').empty().parent().addClass("active").end().append(b("<option />",{text:"Select Brand"})).off().on("change",function(d){d.preventDefault(),a.find(".step-3").animate({opacity:0},250),b(this).parent().removeClass("active"),g(a,c,this.value)});var e=[],f={};b.each(d,function(a,b){e[a]=b.BrandID,f[b.BrandID]=b.BrandName}),e=e.unique(),b.each(e,function(c){a.find('[name="brand-list"]').append(b("<option />",{value:e[c],text:f[e[c]]}))})}})}function g(a,c,d){var e=JSON.stringify({HasPartsListing:1,Displayable:1,BrandID:d,Categories:c}),f=JSON.stringify({Categories:1}),g=JSON.stringify({_id:0,Categories:1});b.ajax({url:j+e+"/0/"+f+"/"+g+"?callback=?",type:"GET",dataType:"json",success:function(c){i(a),a.find(".step-2").animate({opacity:1},500),a.find('[name="model-list"]').empty(),a.find('[name="type-list"]').empty().parent().addClass("active").end().append(b("<option />",{text:"Select Type"})).off().on("change",function(c){c.preventDefault(),b(this).parent().removeClass("active"),h(a,d,this.value)});var e=[],f={};b.each(c,function(a,c){b.each(c,function(a,c){b.each(c,function(a,b){e=e.concat(b.ID),f[b.ID]=b.Name})})}),e=e.unique(),b.each(e,function(c){a.find('[name="type-list"]').append(b("<option />",{value:e[c],text:f[e[c]]}))})}})}function h(a,c,e){var f=JSON.stringify({HasPartsListing:1,Displayable:1,BrandID:c,Categories:{$elemMatch:{ID:e}}}),g=JSON.stringify({_id:0,ProdID:1,Name:1});b.ajax({url:j+f+"/0/{}/"+g+"?callback=?",type:"GET",dataType:"json",success:function(c){i(a),a.find(".step-3").animate({opacity:1},500),a.find('[name="model-list"]').empty().parent().addClass("active").end().append(b("<option />",{text:"Select Model"})).off().on("change",function(a){if(a.preventDefault(),b(".no-touch").length){var c=window.open("http://www.horizonhobby.com/"+this.value+"?clickpath="+b(this).closest(".parts-bar").data("cat")+"_partsfinder#parts");c===d&&(location.href="http://www.horizonhobby.com/"+this.value+"?clickpath="+b(this).closest(".parts-bar").data("cat")+"_partsfinder#parts")}else location.href="http://www.horizonhobby.com/"+this.value+"?clickpath="+b(this).closest(".parts-bar").data("cat")+"_partsfinder#parts"}),b.each(c,function(d){a.find('[name="model-list"]').append(b("<option />",{value:c[d].ProdID,text:c[d].Name.replace(/&trade;/g,"™").replace(/&reg;/g,"®")+" ("+c[d].ProdID+")"}))})}})}function i(a){a.find(".parts-bar .active").removeClass("active")}var j="http://104.236.76.97/search/";e(),Array.prototype.shuffle=function(){for(var a,b,c=this,d=c.length;d;a=Math.floor(Math.random()*d),b=c[--d],c[d]=c[a],c[a]=b);return c},Array.prototype.unique=function(){var a=this;return a.reduce(function(a,b){return a.indexOf(b)<0&&a.push(b),a},[])}}(window,window.jQuery,document)();